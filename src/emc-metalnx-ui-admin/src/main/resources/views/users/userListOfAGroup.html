
<!--
  ~ Copyright (c) 2015-2017, Dell EMC
  ~
  ~  Licensed under the Apache License, Version 2.0 (the "License");
  ~  you may not use this file except in compliance with the License.
  ~  You may obtain a copy of the License at
  ~
  ~  http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~  Unless required by applicable law or agreed to in writing, software
  ~  distributed under the License is distributed on an "AS IS" BASIS,
  ~  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~  See the License for the specific language governing permissions and
  ~  limitations under the License.
  -->

<!-- Current Users Table -->
<div th:fragment="userList" class="row">

	<div class="col-sm-12 table-responsive" th:if="${foundUsers}">
	
		<div class="alert" role="alert">
			<p class="text-center">
				<b><span th:text="${resultSize}" id="resultCount"></span></b> <span th:text="#{users.management.result.number.found}"></span>
			</p>
		</div>
		
		<div class="scrollable-table">
			<table class="table table-hover" id="usersListTable">
				<thead>
					<tr>
						<th data-sortable="true" th:text="#{users.management.table.first.name.label}"></th>
						<th th:text="#{users.management.table.last.name.label}"></th>
						<th th:text="#{users.management.table.username.label}"></th>
						<th th:text="#{users.management.table.zone.label}"></th>
						<th th:text="#{users.management.table.email.label}"></th>
					</tr>
				</thead>

				<tbody id="fBody">
					<tr th:each="user : ${users}">
						<td th:text="${user.firstName}"></td>
						<td th:text="${user.lastName}"></td>
						<td th:text="${user.username}"></td>
						<td th:text="${user.additionalInfo}"></td>
						<td th:text="${user.email}"></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	
	<div class="col-sm-12" th:unless="${foundUsers}">
		<div class="alert alert-danger" role="alert">
			<p class="text-center">
				<span th:text="#{search.results.not.found.label}"></span> "<b><span th:text="${queryString}"></span></b>".
			</p>
		</div>
	</div>
	
	<!-- Modal -->
	<div class="modal fade" id="removalModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
				  <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
				  <h4 class="modal-title" id="myModalLabel" th:text="#{confirmation.removal.title}">
				  </h4>
				</div>
				<div class="modal-body">
					<span th:text="#{confirmation.removal.label}"></span>
					<span id="elementToBeRemoved" style="font-weight: bold;"></span> 
					?
				</div>
				<div class="modal-footer">
				  <button type="button" class="btn btn-default" data-dismiss="modal" 
				  	th:text="#{confirmation.message.cancel}">
				  </button>
				  <button type="button" class="btn btn-primary" onclick="removeElement();" 
				  	th:text="#{confirmation.message.yes}">
				  </button>
				</div>
			</div>
		</div>
	</div>

	
    <script type="text/javascript" th:src="@{/js/jquery.tablesorter.min.js}"></script>
	<!-- User removal confirmation -->
	<script th:inline="javascript">
		$(function(){
			$("#usersListTable").tablesorter(); 
		});
	
		function removeElement() {
			var username = $("#elementToBeRemoved").html();
			window.location = [[${urlMap.URL_DELETE_USER}]] + username + "/";
		} 
	
		/* Show dialog to confirm user removal */
        function confirmUserRemoval(username) {
			$("#elementToBeRemoved").html(username);
			$("#removalModal").modal("show");
		}
	</script>

</div>